<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rachel Thomas">
<meta name="dcterms.date" content="2019-08-07">
<meta name="description" content="How surveillance makes us less safe">

<title>Rachel Thomas, PhD - 8 Things You Need to Know about Surveillance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Rachel Thomas, PhD - 8 Things You Need to Know about Surveillance">
<meta property="og:description" content="a blog about science, data, ethics, &amp; education">
<meta property="og:image" content="https://rachel.fast.ai/posts\2019-08-07-surveillance\ibm-hitler.jpg">
<meta property="og:site-name" content="Rachel Thomas, PhD">
<meta name="twitter:title" content="Rachel Thomas, PhD - 8 Things You Need to Know about Surveillance">
<meta name="twitter:description" content="a blog about science, data, ethics, &amp; education">
<meta name="twitter:image" content="https://rachel.fast.ai/posts\2019-08-07-surveillance\ibm-hitler.jpg">
<meta name="twitter:creator" content="@math_rachel">
<meta name="twitter:site" content="@math_rachel">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Rachel Thomas, PhD</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/racheltho"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/math_rachel"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/rachel-thomas-942a7923/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">8 Things You Need to Know about Surveillance</h1>
                  <div>
        <div class="description">
          How surveillance makes us less safe
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">ethics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Rachel Thomas </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 7, 2019</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Over 225 police departments have partnered with Amazon to have access to Amazon’s video footage obtained as part of the “smart” doorbell product Ring, and in many cases these partnerships are <a href="https://www.vice.com/en_us/article/d3ag37/us-cities-are-helping-people-buy-amazon-surveillance-cameras-using-taxpayer-money">heavily subsidized with taxpayer money</a>. Police departments are allowing Amazon <a href="https://gizmodo.com/cops-are-giving-amazons-ring-your-real-time-911-data-1836883867">to stream 911 call</a> information directly in real-time, and Amazon requires police departments to <a href="https://gizmodo.com/everything-cops-say-about-amazons-ring-is-scripted-or-a-1836812538">read pre-approved scripts</a> when talking about the program. If a homeowner doesn’t want to share data from their video camera doorbell with police, an officer for the Fresno County Sheriff’s Office said <a href="https://gizmodo.com/amazons-ring-is-teaching-cops-how-to-persuade-customers-1837000515">they can just go directly to Amazon</a> to obtain it. This creation of an extensive surveillance network, the murky private-public partnership surrounding it, and a lack of any sort of regulations or oversight is frightening. And this is just one of many examples related to surveillance technology that have recently come to light.</p>
<p>I frequently talk with people who are not that concerned about surveillance, or who feel that the positives outweigh the risks. Here, I want to share some important truths about surveillance:</p>
<ol>
<li>
<a href="#genocide">Surveillance can facilitate human rights abuses and even genocide</a>
</li>
<li>
<a href="#purposes">Data is often used for different purposes than why it was collected</a>
</li>
<li>
<a href="#errors">Data often contains errors</a>
</li>
<li>
<a href="#accountability">Surveillance typically operates with no accountability</a>
</li>
<li>
<a href="#behavior">Surveillance changes our behavior</a>
</li>
<li>
<a href="#uneven">Surveillance disproportionately impacts the marginalized</a>
</li>
<li>
<a href="#aggregate">Data privacy is a public good</a>
</li>
<li>
<a href="#hope">We don’t have to accept invasive surveillance</a>
</li>
</ol>
<p>While I was writing this post, a number of investigative articles came out with disturbing new developments related to surveillance. I decided that rather than attempt to include everything in one post (which would make it too long and too dense), I would go ahead and share the above facts about surveillance, as they are just a relevant as ever.</p>
<center>
<blockquote class="twitter-tweet blockquote">
<p lang="en" dir="ltr">
The last 24 hours:<br>- NYC police using facial recognition on 11 year old kids<br>- Cops are giving Amazon real-time 911 caller data<br>- California Facial Recognition Interconnect<br>- contd facial rec on protesters in Hong Kong<br>- Palantir founder Peter Thiel gets op-ed in NYTimes
</p>
— Rachel Thomas (<span class="citation" data-cites="math_rachel">@math_rachel</span>) <a href="https://twitter.com/math_rachel/status/1157357983036137473?ref_src=twsrc%5Etfw">August 2, 2019</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>
<h2 id="genocide" class="anchored">
<ol type="1">
<li>Surveillance can facilitate human rights abuses and even genocide
</li></ol></h2>

<p><a href="https://www.theengineroom.org/dangerous-data-the-role-of-data-collection-in-genocides/">There is a long history</a> of data about sensitive attributes being misused, including the use of the 1940 USA Census to intern Japanese Americans, a system of identity cards introduced by the Belgian colonial government that were later used during the 1994 Rwandan genocide (in which nearly a million people were murdered), and the <a href="https://www.huffpost.com/entry/ibm-holocaust_b_1301691">role of IBM in helping Nazi Germany</a> use punchcard computers to identify and track the mass killing of millions of Jewish people. More recently, the mass internment of over one million people who are part of an ethnic minority in Western China was facilitated through <a href="https://www.wired.com/story/inside-chinas-massive-surveillance-operation/">the use of a surveillance network</a> of cameras, biometric data (including images of people’s faces, audio of their voices, and blood samples), and phone monitoring.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ibm-hitler.jpg" class="img-fluid figure-img" style="width:50.0%"></p>
<p></p><figcaption class="figure-caption">Adolf Hitler meeting with IBM CEO Tom Watson Sr.&nbsp;in 1937. Source: https://www.computerhistory.org/revolution/punched-cards/2/15/109</figcaption><p></p>
</figure>
</div>
<p>Pictured above is Adolf Hitler (far left) meeting with IBM CEO Tom Watson Sr.&nbsp;(2nd from left), shortly before Hitler awarded Watson a special “Service to the Reich” medal in 1937 (<a href="https://www.jewishgen.org/ForgottenCamps/General/TimeEng.html">for a timeline of the Holocaust, see here</a>). Watson returned the medal in 1940, although IBM continued to do business with the Nazis. IBM technology helped the Nazis conduct detailed censuses in countries they occupied, to thoroughly identify anyone of Jewish descent. <a href="https://www.huffpost.com/entry/ibm-holocaust_b_1301691">Nazi concentration camps used IBM’s punchcard machines</a> to tabulate prisoners, recording whether they were Jewish, gay, or Gypsies, and whether they died of “natural causes,” execution, suicide, or via “special treatment” in gas chambers. It is not the case that IBM sold the machines and then was done with it. Rather, IBM and its subsidiaries provided regular training and maintenance on-site at the concentration camps: printing off cards, configuring machines, and repairing them as they broke frequently.</p>
<h2 id="purposes" class="anchored">
<ol start="2" type="1">
<li>Data is often used for different purposes than why it was collected
</li></ol></h2>

<p>In the above examples, the data collection began before genocide was committed. IBM began selling to Nazi Germany well before the Holocaust (although continued for far too long), including helping with Germany’s 1933 census conducted by Adolf Hitler, which was effective at identifying far more Jewish people than had previously been recognized in Germany.</p>
<p>It is important to recognize how data and images gathered through surveillance can be weaponized later. Columbia professor <a href="https://www.nytimes.com/2019/04/10/opinion/sunday/privacy-capitalism.html">Tim Wu wrote</a> that <em>“One [hard truth] is that data and surveillance networks created for one purpose can and will be used for others. You must assume that any personal data that Facebook or Android keeps are data that governments around the world will try to get or that thieves will try to steal.”</em></p>
<p>Plenty of data collection is not involved with such extreme abuse as genocide; however, in a time of global resurgence of white supremacist, ethno-nationalist, and authoritarian movements, it would be deeply irresponsible to not consider how data &amp; surveillance can and will be weaponized against already vulnerable groups.</p>
<h2 id="errors" class="anchored">
<ol start="3" type="1">
<li>Data often has errors (and no mechanism for correcting them)
</li></ol></h2>

<p>A <a href="https://www.latimes.com/local/lanow/la-me-ln-calgangs-audit-20160811-snap-story.html">database of suspected gang members</a> maintained by California law enforcement officials was found to be full of errors, including 42 babies who had been added to the database when they were less than 1 year old (28 of whom were marked as “admitting to being gang members”). Even worse, there was no process in place for correcting mistakes or removing people once they’ve been added.</p>
<p>An <a href="https://www.washingtonpost.com/posteverything/wp/2016/09/08/how-the-careless-errors-of-credit-reporting-agencies-are-ruining-peoples-lives/">NPR reporter recounts his experience</a> of trying to rent an apartment and discovering that TransUnion, one of the 3 major credit bureaus, incorrectly reported him as having two felony firearms convictions. TransUnion only removed the mistakes after a dozen phone calls and notification that the story would be reported on. This is not an unusual story: the FTC’s large-scale study of credit reports in 2012 found 26% of consumers had at least one mistake in their files and 5% had errors that could be devastating. An even more opaque, <a href="https://www.washingtonpost.com/business/economy/little-known-firms-tracking-data-used-in-credit-scores/2011/05/24/gIQAXHcWII_story.html?utm_term=.19efcc7df056">unregulated “4th bureau” exists</a>: a collection of companies buying and selling personal information about people on the margins of the banking system (such as immigrants, students, and people with low incomes), with no standards on what types of data are included, no way to opt out, and no system for identifying or correcting mistakes.</p>
<h2 id="accountability" class="anchored">
<ol start="4" type="1">
<li>Surveillance typically operates with no accountability
</li></ol></h2>

<p>What makes the examples in the previous section disturbing is not just that errors occurred, but that there was no way to identify or correct them, and no accountability for those profiting off the error-laden data. Often, even the existence of the systems being used is not publicly known (much less details of how these systems work), unless discovered by journalists or revealed by whistleblowers. The <a href="https://www.metrotimes.com/news-hits/archives/2019/07/29/bipartisan-panel-why-detroits-facial-recognition-technology-should-be-banned">Detroit Police Dept</a> used facial recognition technology for nearly two years without public input and in violation of a requirement that a policy be approved by the city’s Board of Police Commissioners, until a <a href="https://www.americaunderwatch.com/">study from Georgetown Law’s Center for Privacy &amp; Technology</a> drew attention to the issue. Palantir, the defense startup founded by billionaire Peter Thiel, ran a program with <a href="https://www.theverge.com/2018/2/27/17054740/palantir-predictive-policing-tool-new-orleans-nopd">New Orleans Police Department for 6 years</a> which city council members did not even know about, much less have any oversight.</p>
<p>After two studies found that Amazon’s facial recognition software produced <a href="https://www.nytimes.com/2018/07/26/technology/amazon-aclu-facial-recognition-congress.html">inaccurate</a> and <a href="https://www.theverge.com/2019/1/25/18197137/amazon-rekognition-facial-recognition-bias-race-gender">racially biased results</a>, Amazon countered that the researchers should have changed the default parameters. However, it turned out that <a href="https://gizmodo.com/defense-of-amazons-face-recognition-tool-undermined-by-1832238149">Amazon was not instructing police departments</a> that use its software to do this either. Surveillance programs are operating with few regulations, no oversight, no accountability around accuracy or mistakes, and in many cases, no public knowledge of what is going on.</p>
<h2 id="behavior" class="anchored">
<ol start="5" type="1">
<li>Surveillance changes our behavior
</li></ol></h2>

<p>Hundreds of thousands of people in <a href="https://www.bbc.com/news/world-asia-china-48656471">Hong Kong are protesting</a> an unpopular new bill which would allow extradition to China. Typically, Hong Kong locals use their rechargeable smart cards to ride the subway. However, during the protests, <a href="https://qz.com/1642441/extradition-law-why-hong-kong-protesters-didnt-use-own-metro-cards/">long lines of people</a> waited to use cash to buy paper tickets (usually something that only tourists do) concerned that they would be tracked for having attended the protests. Would fewer people protest if this was not an option?</p>
<p>In the United States, in 2015 the <a href="https://www.theverge.com/2016/10/11/13243890/facebook-twitter-instagram-police-surveillance-geofeedia-api">Baltimore Police Department used facial recognition</a> technology to surveil people protesting the death of Freddie Grey, a young Black man who was killed in police custody, and arrested protesters with outstanding warrants. Mass surveillance could have a chilling impact on our rights to move about freely, to express ourselves, and to protest. <em>“We act differently when we know we are ‘on the record.’ Mass privacy is the freedom to act without being watched and thus in a sense, to be who we really are,”</em> Columbia professor <a href="https://www.nytimes.com/2019/04/10/opinion/sunday/privacy-capitalism.html">Tim Wu wrote</a> in the New York Times.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="geofeedia.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Flyer from the company Geofeedia. Source: https://www.aclunc.org/docs/20161011_geofeedia_baltimore_case_study.pdf</figcaption><p></p>
</figure>
</div>
<h2 id="uneven" class="anchored">
<ol start="6" type="1">
<li>Surveillance disproportionately impacts those who are already marginalized
</li></ol></h2>

<p>Surveillance is applied unevenly, causing the greatest harm to people who are already marginalized, including immigrants, people of color, and people living in poverty. These groups are more heavily policed and surveilled. <a href="https://www.law.georgetown.edu/privacy-technology-center/publications/the-perpetual-line-up/">The Perpetual Line-Up</a> from the Georgetown Law Center on Privacy and Technology studied the unregulated use of facial recognition by police, with half of all Americans appearing in law enforcement databases, and the risks of errors, racial bias, misuses, and threats to civil liberties. The researchers pointed out that African Americans are <a href="https://www.perpetuallineup.org/findings/racial-bias">more likely to appear</a> in these databases (many of which are drawn from mug shots) since they are disproportionately likely to be stopped, interrogated, or arrested. For another example, consider the contrast between how easily people over 65 can apply for Medicare benefits by filling out an online form, with <a href="https://tcf.org/content/report/disparate-impact-surveillance/">the invasive personal questions</a> asked of a low-income mother on Medicaid about her lovers, hygiene, parental shortcomings, and personal habits.</p>
<p>In an article titled <a href="https://www.fastcompany.com/90317495/another-tax-on-the-poor-surrendering-privacy-for-survival">Trading privacy for survival is another tax on the poor</a>, Ciara Byrne wrote, <em>“Current public benefits programs ask applicants extremely detailed and personal questions and sometimes mandate home visits, drug tests, fingerprinting, and collection of biometric information… Employers of low-income workers listen to phone calls, conduct drug tests, monitor closed-circuit television, and require psychometric tests as conditions of employment. Prisoners in some states have to consent to be voiceprinted in order to make phone calls.”</em></p>
<h2 id="aggregate" class="anchored">
<ol start="7" type="1">
<li>Data privacy is a public good, like air quality or safe drinking water
</li></ol></h2>

<p>Data is more revealing in aggregate. It can be nearly impossible to know what your individual data could reveal when combined with the data of others or with data from other sources, or when machine learning inference is performed on it. For instance, as <a href="https://www.nytimes.com/2018/01/30/opinion/strava-privacy.html">Zeynep Tufekci wrote</a> in the New York Times, individual Strava users could not have predicted how in aggregate their data could be used to identify the locations of US military bases. <em>“Data privacy is not like a consumer good, where you click ‘I accept’ and all is well. Data privacy is more like air quality or safe drinking water, a public good that cannot be effectively regulated by trusting in the wisdom of millions of individual choices. A more collective response is needed.”</em></p>
<p>Unfortunately, this also means that you can’t fully safeguard your privacy on your own. You may choose not to purchase Amazon’s ring doorbell, yet you can still show up in the video footage collected by others. You might strengthen your online privacy practices, yet conclusions will still be inferred about you based on the behavior of others. As Professor Tufekci wrote, <strong>we need a collective response</strong>.</p>
<h2 id="hope" class="anchored">
<ol start="8" type="1">
<li>We don’t have to accept invasive surveillance
</li></ol></h2>

<p>Many people are uncomfortable with surveillance, but feel like they have no say in the matter. While the threats surveillance poses are large, it is not too late to act. We are seeing success: in response to community organizing and an audit, Los Angeles Police Department <a href="https://www.latimes.com/local/lanow/la-me-lapd-predictive-policing-big-data-20190405-story.html">scrapped a controversial program</a> to predict who is most likely to commit violent crimes. <a href="https://www.metrotimes.com/news-hits/archives/2019/07/29/bipartisan-panel-why-detroits-facial-recognition-technology-should-be-banned">Citizens, researchers, and activists in Detroit</a> have been effective at drawing attention to the Detroit Police Department’s unregulated use of facial recognition and a bill calling for a 5-year moratorium has been introduced to the state legislature. Local governments in <a href="https://www.bbc.com/news/technology-48276660">San Francisco</a>, <a href="https://www.sfchronicle.com/bayarea/article/Oakland-bans-use-of-facial-recognition-14101253.php">Oakland</a>, and <a href="https://www.bostonglobe.com/metro/2019/06/27/somerville-city-council-passes-facial-recognition-ban/SfaqQ7mG3DGulXonBHSCYK/story.html">Somerville</a> have banned the use of facial recognition by police.</p>
<p>For further resources, please check out: - <a href="https://www.law.georgetown.edu/privacy-technology-center/">Georgetown Law Center on Privacy and Technology</a> - <a href="https://www.odbproject.org/tools/">Digital Defense Playbook</a></p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>